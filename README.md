# Мовшин Максим Антонович | БПИ213 | ИДЗ-3 | Вариант 12
## Условие задачи
Задача о гостинице – 1. В гостинице 30 номеров, гости гости- ницы снимают номер на одни или несколько суток. Если в гости- нице нет свободных номеров, гости не уходят, а устраиваются на рядом с гостиницей на скамейках и ждут, пока любой номеров не освободится. Создать приложение, моделирующее работу гостиницы. Сервер — это гостиница. Прибывающие гости мо- гут порождаться отдельным клиентом. Другой клиент — это скамейки, образующие очередь ожидающих гостей.

Замечания:
https://t.me/c/1895583371/2267
По предварительному обсуждению модифицировал условие задачи.
Скамейка также будет сервером. Также не вижу объективных причин фиксировать количество номеров, оно будет задаваться входным параметром.
## Решение
Три сущности:
- Люди (клиент)
- Отель (сервер)
- Скамейка (сервер)
Функционал Отеля:
Хранит информацию о количестве свободных комнат. 
- На запрос `free` (освободить комнату): Всегда отвечает `okay`, увеличивая количество свободных комнат.
- На запрос `rent` (занять комнату): При наличии свободных комнат отвечает `okay` и уменьшает количество свободных комнат. При отсутствии - отвечает `fail`.
Функционал Скамейки:
- На запрос `sitt` (сесть на скамейку): Всегда отвечает `okay`, эмулируя приход на скамейку.
Функционал Людей:
Клиент хранит информацию о следующем действии каждого человека, и, если надо, количество дней (итераций цикла), которые он еще будет спать.
В бесконечном цикле каждую итерацию Клиент выполняет следующее `действие` по очереди для каждого человека.
Возможные действия человека:
`rent` - попытаться арендовать комнату (запрос к Отелю). Если вышло -> спать. Если нет -> пойти на скамейку.
`slph` - проспать день в отеле, уменьшив количество оставшихся дней сна на 1. Если еще есть время для сна, то намереваться спать дальше. Иначе -> попытаться сдать комнату на след. день.
`slps` - проспать день на скамейке, уменьшив количество оставшихся дней сна на 1. Если еще есть время для сна, то намереваться спать дальше. Иначе -> попытаться арендовать комнату на след. день.
`free` - сдать комнату (запрос к Отелю). На след день попытаться  вновь арендовать комнату.
`sitt` - пойти спать на скамейку (запрос к Скамейке).
### Компиляция
```
make all
```
### Запуск
1. Отель
```
sudo ./server <server port> <rooms amount>
```
2. Скамейка
```
sudo ./skameika
```
3. Люди
```
sudo ./client <server ip> <server port> <people amount> <day delay in seconds>
```
### Пример работы
1. Запуск Отеля
```
sudo ./server 7 5
```
2. Запуск Скамейки
```
sudo ./skameika
```
3. Запуск Людей
```
sudo ./client 127.0.0.1 7 10 2
```

Логи Отеля:

